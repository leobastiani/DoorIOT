{% extends "layout.html" %}
{% block body %}
  <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/switch.css') }}">
  <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/pulsating-circle.css') }}">
  <style>
    html, body {
      margin: 0;
      padding: 0;
      width: 100%;
      height: 100%;
    }
    #background {
      width: 100%;
      height: 100%;
    }

    #onTop {
      position: absolute;
      left: 2%;
      top: 0;
    }

    #onBottom {
      position: absolute;
      left: 2%;
      bottom: 15%;
    }

    h1 {
      color: #FFFFFF;
      text-shadow: 2px 2px 0 #4074b5, 2px -2px 0 #4074b5, -2px 2px 0 #4074b5, -2px -2px 0 #4074b5, 2px 0px 0 #4074b5, 0px 2px 0 #4074b5, -2px 0px 0 #4074b5, 0px -2px 0 #4074b5;
    }
  </style>
  <img id="background" src="https://media.giphy.com/media/Tb2i75AlI926I/giphy.gif">
  <div id="onTop">
    <h1>Destrave as trancas</h1>
    <label class="switch trava">
      <input type="checkbox">
      <span class="slider round"></span>
    </label><br/><br/>
    <label class="switch trava">
      <input type="checkbox">
      <span class="slider round"></span>
    </label><br/><br/>
    <label class="switch trava">
      <input type="checkbox">
      <span class="slider round"></span>
    </label><br/><br/>
  </div>

  <div id="onBottom" style="display: none;">
    <h1>Aperte e segure</h1>
    <div class="container">
      <div class="item"></div>
    </div>
  </div>
{% endblock %}

{% block js %}
<script>
  $('.trava :checkbox').change(function(event) {
    var travaDestravada = $('.trava :checkbox').filter(function() {
      return !this.checked;
    });
    if(travaDestravada.length) {
      // existe alguma trava que t√° destravada
      $('#onBottom').fadeOut('slow')
    }
    else {
      $('#onBottom').fadeIn('slow')
    }
  });
  $('#onBottom').hide();

  $('.container').bind('touchstart mousedown', function (e) {
    e.preventDefault();
    var self = this;

    $.get('/door', {key: key, open: 1, close: 0}, function(data) {
      $(self).find('.item').addClass('yellow');
    });
  })

  $('.container').bind('touchend mouseup', function (e) {
    e.preventDefault();
    var self = this;

    $.get('/door', {key: key, open: 0, close: 1}, function(data) {
      $(self).find('.item').removeClass('yellow');
    });
  })
</script>
{% endblock %}
